<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Árbol Dinámico</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        svg {
            width: 100%;
            height: 600px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <svg></svg>

    <script>
        const data = {
            "name": "Raíz",
            "children": [
                {
                    "name": "Nodo 1",
                    "children": [
                        {"name": "Hoja 1"},
                        {"name": "Hoja 2"}
                    ]
                },
                {
                    "name": "Nodo 2",
                    "children": [
                        {"name": "Hoja 3"},
                        {"name": "Hoja 4"}
                    ]
                }
            ]
        };

        const width = 800, height = 600;
        const svg = d3.select("svg").attr("viewBox", `0 0 ${width} ${height}`);

        const treeLayout = d3.tree().size([width - 100, height - 200]);
        const root = d3.hierarchy(data);
        treeLayout(root);

        const linkGenerator = d3.linkVertical()
            .x(d => d.x)
            .y(d => d.y);

        svg.selectAll("path")
            .data(root.links())
            .enter()
            .append("path")
            .attr("d", linkGenerator)
            .attr("fill", "none")
            .attr("stroke", "black");

        svg.selectAll("circle")
            .data(root.descendants())
            .enter()
            .append("circle")
            .attr("cx", d => d.x)
            .attr("cy", d => d.y)
            .attr("r", 5)
            .attr("fill", "blue");

        svg.selectAll("text")
            .data(root.descendants())
            .enter()
            .append("text")
            .attr("x", d => d.x + 10)
            .attr("y", d => d.y)
            .text(d => d.data.name);
    </script>
</body>
</html>
